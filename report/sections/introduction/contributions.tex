\section{Contributions}

We present an implementation of the MPST framework for developing
interactive web applications over WebSocket transport.
We also present a theory of routed multiparty session types,
which forms the basis for supporting arbitrary communication structures
over a server-centric WebSocket-based network topology.

Related work \citep{PureScript2019, MVU2020, LINKS, Exceptional} 
requires the 
developer to implement their application using tools that are 
unconventional for web development, 
and only support communication protocols that adhere to the
WebSocket network structure.
To the best of our knowledge, this is the first work on multiparty session
type-safe web development that provides the same communication safety 
guarantees using familiar industry tools in TypeScript and React,
and supports peer-to-peer browser interactions over WebSockets. \\

In \textbf{\cref{chap:background}}, 
we introduce the core session type theory
and provide an overview of related work on integrating session types into
application development, with a focus on the state-of-the-art
proposals for session-typed web development. 
We also introduce TypeScript and highlight the 
defining features of the language.

The remainder of the report is organised in three parts as such:

\paragraph{\cref{part:server}}
We present an end-to-end workflow for generating TypeScript APIs for 
server-centric communication protocols over WebSockets. 

In \textbf{\cref{chap:codegen}}, 
we introduce the system architecture for
\codegen. 
The implementation integrates with the Scribble
toolchain to generate handler style APIs that the developer can use to write 
their web applications to guarantee protocol conformance by construction.

We present two code generation strategies for back-end and front-end
TypeScript web development as \nodecodegen and \reactcodegen
in \textbf{\cref{chap:node}} and \textbf{\cref{chap:react}} respectively.

In \textbf{\cref{chap:ext}},
we extend \codegen to support advanced
practices commonly found in full-stack web development,
in a way that
preserves communication safety. 
We modify the API generation strategies
to support \textit{asynchronous implementations} 
and introduce how to 
gracefully handle errors and \textit{session cancellation} 
in the context of interactive web applications.

\paragraph{\cref{part:general}} 
We present a method to relax the server-centric constraint over WebSocket
transport in order to support \textit{peer-to-peer interactions} 
amongst 
client roles, through the concept of \emph{routing}.

In \textbf{\cref{chap:p2p}}, 
we introduce the \tprotocol{Two Buyer} multiparty
protocol to motivate our proposal of providing the server role with 
routing responsibilities, in addition to its existing interactions
specified in the protocol.

In \textbf{\cref{chap:theory}}, 
we introduce a variant of multiparty 
session type theory with routing. We prove that our extensions preserve 
properties required for communication safety, 
session fidelity and deadlock freedom.
We provide an encoding for global types into routed multiparty 
session type theory, and prove the preservation of well-formedness
and communication. Detailed lemmas and proofs in this chapter can
be found in \cref{section:proofs}.

In \textbf{\cref{chap:impl}}, 
we demonstrate how our API generation strategies
implement our routed session type theory to support arbitrary communication
topologies.

\paragraph{\cref{part:evalconcl}}
In \textbf{\cref{chap:eval}}, 
we evaluate our work through 
case studies of communication protocols 
implemented as webservices. Through examples of
multiparty sessions and routed multiparty sessions, 
we demonstrate how the
developer may implement the generated APIs and 
consider the compatibility of our work with respect to
modern web programming practices.
We perform benchmarks on a web application built using our
generated APIs against a baseline implementation to evaluate
the overhead of our implementation.

Finally, we summarise our work in \textbf{\cref{chap:concl}} 
and propose potential
areas of improvement and future work.

\begin{remark}
A part of this project was published as 
\emph{Generating Interactive WebSocket 
Applications in TypeScript} in Volume 314 of the Electronic Proceedings
in Theoretical Computer Science (EPTCS) \cite{PLACES2020},
in which I am the first and lead author.

The materials in \cref{chap:codegen,chap:node,chap:react}
are expanded from \cite{PLACES2020}.
The materials in 
\cref{chap:ext,chap:p2p,chap:theory,chap:impl,chap:eval}
are developed exclusively in this project by myself.
\end{remark}