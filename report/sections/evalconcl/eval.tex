\chapter{Evaluation}
\label{chap:eval}

In this chapter, we
evaluate the expressiveness
and performance of our API generation
toolchain.

%TODO: add when finalised
%with respect to the main objective
%of \dots

To evaluate the expressiveness
of our work,
we use three case studies
of protocols found in webservices
to demonstrate strengths and weaknesses
of our work:

\begin{itemize}

\item
\textbf{\tprotocol{Noughts and Crosses} Game:}

In \cref{section:evalgame},
we implement a classic multiplayer game which involves a game server
and two players interacting with the game via the browser,
to show that our work is compatible with multiparty sessions,
which isn't the case in \cite{MVU2020,Exceptional}.
We show how our generated APIs are compatible with the
state management solution used by the game, and give examples of 
how the generated APIs empower the developer to intuitively 
implement the game interface.

\item
\textbf{\tprotocol{Two Buyers} Protocol, as introduced in \cref{section:twobuyer}:}

In \cref{section:evaltwobuyer},
we walk through an implementation of the \tprotocol{Two Buyers}
protocol. This \textit{cannot} be implemented in
\cite{PureScript2019,MVU2020}, which illustrates the novelty
of our \newtheory theory on routed multiparty session types.
We emphasise how the routing mechanism is transparent to the
developer implementing the protocol, which demonstrates
the practicality of our extensions to \codegen to support
\newtheory.

\item
\textbf{\tprotocol{ATM} Protocol:}

In \cref{section:evalatm},
we implement an ATM web application to demonstrate
limitations of our work. Our generated APIs do not allow
the server endpoint (in this case, the \trole{Bank})
to participate in concurrent sessions (i.e. interacting
with different \trole{Client}s concurrently), even though
the protocol is written in a way that allows this.
However, we propose a way to address this limitation, and expand
upon this in \cref{section:future}.

\end{itemize}


To evaluate the performance of our work,
we run micro-benchmarks
on a variant of the \tprotocol{Ping Pong}
protocol parameterised by the number
of round trips
to analyse the overhead of our implementation,
compared with implementations written
without using our generated APIs,
as the number of round trips increase.
We describe the experiment methodology
and comment on our findings in \cref{section:benchmarks}.

\input{sections/evalconcl/eval/game}

\input{sections/evalconcl/eval/twobuyer}

\input{sections/evalconcl/eval/atm} 

\input{sections/evalconcl/eval/benchmarks}