% quick way of adding a figure
\newcommand{\fig}[3]{
 \begin{center}
 \scalebox{#3}{\includegraphics[#2]{#1}}
 \end{center}
}

%\newcommand*{\point}[1]{\vec{\mkern0mu#1}}
\newcommand{\ci}[0]{\perp\!\!\!\!\!\perp} % conditional independence
\newcommand{\point}[1]{{#1}} % points 
% \renewcommand{\vec}[1]{{\boldsymbol{{#1}}}} % vector
\newcommand{\mat}[1]{{\boldsymbol{{#1}}}} % matrix
\newcommand{\R}[0]{\mathds{R}} % real numbers
\newcommand{\Z}[0]{\mathds{Z}} % integers
\newcommand{\N}[0]{\mathds{N}} % natural numbers
\newcommand{\nat}[0]{\mathds{N}} % natural numbers
\newcommand{\Q}[0]{\mathds{Q}} % rational numbers
\ifxetex
\newcommand{\C}[0]{\mathds{C}} % complex numbers
\else
\newcommand{\C}[0]{\mathds{C}} % complex numbers
\fi
\newcommand{\tr}[0]{\text{tr}} % trace
\renewcommand{\d}[0]{\mathrm{d}} % total derivative
\newcommand{\inv}{^{-1}} % inverse
\newcommand{\id}{\mathrm{id}} % identity mapping
\renewcommand{\dim}{\mathrm{dim}} % dimension
\newcommand{\rank}[0]{\mathrm{rk}} % rank
\newcommand{\determ}[1]{\mathrm{det}(#1)} % determinant
\newcommand{\scp}[2]{\langle #1 , #2 \rangle}
\newcommand{\kernel}[0]{\mathrm{ker}} % kernel/nullspace
\newcommand{\img}[0]{\mathrm{Im}} % image
\newcommand{\idx}[1]{{(#1)}}
\DeclareMathOperator*{\diag}{diag}
\newcommand{\E}{\mathds{E}} % expectation
\newcommand{\var}{\mathds{V}} % variance
\newcommand{\gauss}[2]{\mathcal{N}\big(#1,\,#2\big)} % gaussian distribution N(.,.)
\newcommand{\gaussx}[3]{\mathcal{N}\big(#1\,|\,#2,\,#3\big)} % gaussian distribution N(.|.,.)
\newcommand{\gaussBig}[2]{\mathcal{N}\left(#1,\,#2\right)} % see above, but with brackets that adjust to the height of the arguments
\newcommand{\gaussxBig}[3]{\mathcal{N}\left(#1\,|\,#2,\,#3\right)} % see above, but with brackets that adjust to the height of the arguments
\DeclareMathOperator{\cov}{Cov} % covariance (matrix) 
\ifxetex
\renewcommand{\T}[0]{^\top} % transpose
\else
\newcommand{\T}[0]{^\top}
\fi
% matrix determinant
\newcommand{\matdet}[1]{
\left|
\begin{matrix}
#1
\end{matrix}
\right|
}



%%% various color definitions
\definecolor{darkgreen}{rgb}{0,0.6,0}

\newcommand{\blue}[1]{{\color{blue}#1}}
\newcommand{\red}[1]{{\color{red}#1}}
\newcommand{\green}[1]{{\color{darkgreen}#1}}
\newcommand{\orange}[1]{{\color{orange}#1}}
\newcommand{\magenta}[1]{{\color{magenta}#1}}
\newcommand{\cyan}[1]{{\color{cyan}#1}}


% redefine emph
\renewcommand{\emph}[1]{\blue{\bf{#1}}}

% place a colored box around a character
\gdef\colchar#1#2{%
  \tikz[baseline]{%
  \node[anchor=base,inner sep=2pt,outer sep=0pt,fill = #2!20] {#1};
    }%
}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{ bm }					% \bm
\usepackage{ cmll }				% \with
\usepackage{ mathtools }		% \mathmakebox

% PI CALCULUS
\newcommand{\pout}[2]{
{{#1}\langle {#2} \rangle}
}
\newcommand{\pin}[2]{
{{#1}({#2})}
}


% GENERAL
\newcommand{\role}[1]{
{\color{blue}\bm{\mathsf{#1}}}
}
\newcommand{\mrole}[1]{
{\mathtt{#1}}
}
\newcommand{\mroles}[2]{
{\mrole{#1}\mrole{#2}}
}
\newcommand{\pt}[1]{
{\textnormal{\texttt{pt}}\left({#1}\right)}
}
\newcommand{\rulename}[1]{
[\textsc{#1}]
}
\newcommand{\hlrulename}[1]{
\hl{[\textsc{#1}]}
}
\newcommand{\projconf}[1]{
{\left\langle{#1}\right\rangle}
}
\newcommand{\subtype}{
\prec
}

% NEW GENERAL
\newcommand{\centroidop}{\circledast}
\newcommand{\centroid}[2]{
{#1} \centroidop \mrole{#2}
}

% GLOBAL TYPES
\newcommand{\tend}{\textnormal{\texttt{end}}}
\newcommand{\trecvar}{\textnormal{\texttt{t}}}
\newcommand{\trec}[1]{\mu\trecvar.{#1}}
\newcommand{\gcommone}[3]{
\mrole{#1} \to \mrole{#2}. ~ {#3} :
}
\newcommand{\gcomm}[4]{
\mrole{#1} \to \mrole{#2} : \left\{ {#3} \right\}_{#4}
}
\newcommand{\gtrans}[5]{
\mrole{#1} \rightsquigarrow \mrole{#2}. ~ {#3} : \left\{ {#4} \right\}_{#5}
}
\newcommand{\wf}[1]{
\textnormal{\texttt{wellFormed}}\left(#1\right)
}
\newcommand{\proj}[2]{
{#1} \projop \mrole{#2}
}
\newcommand{\projop}{\upharpoonright}
\newcommand{\mergeop}{
\sqcap
}
\newcommand{\MERGEOP}{
{\mbox{\LARGE$\sqcap$}}
}
\newcommand{\tmerge}[2]{
{#1}\,{\mergeop}\,{#2}
}

% NEW GLOBAL TYPES
\newcommand{\grouteone}[4]{
\mrole{#1} \xrightarrow[\mrole{#3}]{} \mrole{#2}. ~ {#4} :
}
\newcommand{\groute}[5]{
\mrole{#1} \xrightarrow[\mrole{#3}]{} \mrole{#2} : \left\{ {#4} \right\}_{#5}
}
\newcommand{\gtransroute}[6]{
\mrole{#1} \underset{\mrole{#3}}{\rightsquigarrow} \mrole{#2}. ~ {#4} : \left\{ {#5} \right\}_{#6}
}
\newcommand{\wfnew}[2]{
\textnormal{\texttt{wellFormed}}\left(#1, \mrole{#2}\right)
}

% LOCAL TYPES
\newcommand{\tbra}[3]{
\mrole{#1} \with \left\{ #2 \right\}_{#3}
}
\newcommand{\tsel}[3]{
\mrole{#1} \oplus \left\{ {#2} \right\}_{#3}
}
\newcommand{\tselone}[2]{
\mrole{#1} \oplus {#2}
}
\newcommand{\lty}[1]{
T_{\mrole{#1}}
}
\newcommand{\pinP}{
{\mrole{p} \in \mathcal{P}}
}
\newcommand{\qqinP}{
{\mroles{q}{q'} \in \mathcal{P}}
}

% NEW LOCAL TYPES
\newcommand{\router}[4]{
\mrole{#1} \hookrightarrow \mrole{#2}: \left\{{#3}\right\}_{#4}
}
\newcommand{\routerone}[4]{
\texttt{route}\left(\mrole{#1} \hookrightarrow \mrole{#2}: {#3}.~{#4}\right)
}
\newcommand{\routertrans}[5]{
\mrole{#1} \looparrowright \mrole{#2}. ~ {#3} : \left\{{#4}\right\}_{#5}
}

\newcommand{\tselproxy}[4]{
\tsel{\mrole{#1}_{\mrole{#2}}}{#3}{#4}
}

\newcommand{\tbraproxy}[4]{
\tbra{\mrole{#1}_{\mrole{#2}}}{#3}{#4}
}

% LTS
\newcommand{\aout}[3]{
\mrole{#1}\mrole{#2}!{#3}
}
\newcommand{\ain}[3]{
\mrole{#1}\mrole{#2}?{#3}
}
\newcommand{\subj}[1]{
\text{subj}({#1})
}
\newcommand{\treduce}[3]{
{#1} \xrightarrow{\mathmakebox[1em]{#3}} {#2} 
}
\newcommand{\treducelong}[3]{
{#1} \xrightarrow{\mathmakebox[3.5em]{#3}} {#2} 
}

% NEW LTS
\newcommand{\via}[2]{
{\texttt{via}_{\mrole{#1}}({#2})}
}

% ENCODING
\newcommand{\enc}[2]{
\llbracket {#1},~\mrole{#2} \rrbracket
}
\newcommand{\enclocal}[3]{
\llbracket {#1},~\mrole{#2},~\mrole{#3} \rrbracket
}